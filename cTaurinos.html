<!-- Styles -->
<style>
    #chartdivTaurinos {
      width: 100%;
      height: 400px;
    }
    </style>
    
    <!-- Resources -->
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
    
    <!-- Chart code -->
    <script>
    am5.ready(function() {
    
    // Data
    var allData = {
'1': {'Gabriel A.': 4,'Tomás M.': 4,'Diego G.': 0,'Nicolás P.': 0,},
'2': {'Gabriel A.': 7,'Tomás M.': 7,'Diego G.': 3,'Nicolás P.': 3,},
'3': {'Gabriel A.': 11,'Tomás M.': 10,'Diego G.': 6,'Nicolás P.': 6,},
'4': {'Gabriel A.': 19,'Tomás M.': 18,'Diego G.': 14,'Nicolás P.': 7,},
'5': {'Gabriel A.': 19,'Tomás M.': 18,'Diego G.': 14,'Nicolás P.': 7,},
'6': {'Gabriel A.': 20,'Tomás M.': 18,'Diego G.': 14,'Nicolás P.': 8,},
'7': {'Gabriel A.': 23,'Tomás M.': 21,'Diego G.': 14,'Nicolás P.': 8,},
'8': {'Gabriel A.': 26,'Tomás M.': 24,'Diego G.': 17,'Nicolás P.': 11,},
'9': {'Gabriel A.': 27,'Tomás M.': 27,'Diego G.': 17,'Nicolás P.': 12,},
'10': {'Gabriel A.': 27,'Tomás M.': 27,'Diego G.': 17,'Nicolás P.': 12,},
'11': {'Gabriel A.': 31,'Tomás M.': 31,'Diego G.': 21,'Nicolás P.': 15,},
'12': {'Gabriel A.': 34,'Tomás M.': 34,'Diego G.': 25,'Nicolás P.': 19,},
'13': {'Tomás M.': 37,'Gabriel A.': 35,'Diego G.': 33,'Nicolás P.': 23,},
'14': {'Tomás M.': 40,'Gabriel A.': 35,'Diego G.': 34,'Nicolás P.': 24,},
'15': {'Tomás M.': 43,'Gabriel A.': 38,'Diego G.': 37,'Nicolás P.': 27,},
'16': {'Tomás M.': 47,'Diego G.': 45,'Gabriel A.': 42,'Nicolás P.': 30,},
'17': {'Tomás M.': 47,'Diego G.': 45,'Gabriel A.': 42,'Nicolás P.': 30,},
'18': {'Tomás M.': 50,'Diego G.': 46,'Gabriel A.': 45,'Nicolás P.': 33,},
'19': {'Tomás M.': 51,'Diego G.': 47,'Gabriel A.': 46,'Nicolás P.': 34,},
'20': {'Tomás M.': 52,'Diego G.': 47,'Gabriel A.': 47,'Nicolás P.': 34,},
'21': {'Tomás M.': 53,'Diego G.': 48,'Gabriel A.': 48,'Nicolás P.': 42,},
'22': {'Tomás M.': 57,'Diego G.': 52,'Gabriel A.': 52,'Nicolás P.': 46,},
'23': {'Tomás M.': 58,'Nicolás P.': 54,'Diego G.': 53,'Gabriel A.': 53,},
'24': {'Tomás M.': 62,'Diego G.': 61,'Nicolás P.': 58,'Gabriel A.': 56,},
'25': {'Tomás M.': 63,'Diego G.': 61,'Nicolás P.': 59,'Gabriel A.': 57,},
'26': {'Tomás M.': 63,'Diego G.': 61,'Nicolás P.': 59,'Gabriel A.': 57,},
'27': {'Tomás M.': 66,'Diego G.': 64,'Nicolás P.': 63,'Gabriel A.': 57,},
'28': {'Tomás M.': 74,'Diego G.': 67,'Nicolás P.': 64,'Gabriel A.': 60,},
'29': {'Tomás M.': 77,'Diego G.': 70,'Nicolás P.': 64,'Gabriel A.': 63,},
'30': {'Tomás M.': 78,'Diego G.': 73,'Nicolás P.': 64,'Gabriel A.': 64,},
'31': {'Tomás M.': 81,'Diego G.': 76,'Nicolás P.': 72,'Gabriel A.': 67,},
'32': {'Tomás M.': 81,'Diego G.': 77,'Nicolás P.': 75,'Gabriel A.': 71,},
'33': {'Tomás M.': 85,'Diego G.': 81,'Nicolás P.': 79,'Gabriel A.': 79,},
'34': {'Tomás M.': 86,'Diego G.': 82,'Gabriel A.': 82,'Nicolás P.': 80,},
'35': {'Tomás M.': 90,'Diego G.': 85,'Gabriel A.': 85,'Nicolás P.': 84,},
'36': {'Tomás M.': 91,'Diego G.': 88,'Gabriel A.': 88,'Nicolás P.': 87,},
'37': {'Tomás M.': 92,'Diego G.': 88,'Gabriel A.': 88,'Nicolás P.': 87,},
'38': {'Tomás M.': 92,'Diego G.': 89,'Gabriel A.': 89,'Nicolás P.': 88,},
'39': {'Tomás M.': 96,'Diego G.': 93,'Gabriel A.': 93,'Nicolás P.': 92,},
'40': {'Tomás M.': 104,'Gabriel A.': 97,'Nicolás P.': 95,'Diego G.': 93,},
'41': {'Tomás M.': 107,'Nicolás P.': 98,'Gabriel A.': 98,'Diego G.': 96,},
'42': {'Tomás M.': 110,'Diego G.': 104,'Nicolás P.': 99,'Gabriel A.': 99,},
'43': {'Tomás M.': 110,'Diego G.': 104,'Nicolás P.': 99,'Gabriel A.': 99,},
'44': {'Tomás M.': 113,'Diego G.': 107,'Nicolás P.': 103,'Gabriel A.': 102,},
'45': {'Tomás M.': 113,'Diego G.': 107,'Nicolás P.': 103,'Gabriel A.': 102,},
'46': {'Tomás M.': 121,'Diego G.': 111,'Nicolás P.': 111,'Gabriel A.': 106,},
'47': {'Tomás M.': 121,'Diego G.': 112,'Nicolás P.': 112,'Gabriel A.': 106,},
'48': {'Tomás M.': 124,'Diego G.': 115,'Nicolás P.': 115,'Gabriel A.': 109,},
'49': {'Tomás M.': 128,'Diego G.': 118,'Nicolás P.': 115,'Gabriel A.': 112,},
'50': {'Tomás M.': 136,'Nicolás P.': 123,'Diego G.': 122,'Gabriel A.': 116,},
'51': {'Tomás M.': 139,'Nicolás P.': 127,'Diego G.': 126,'Gabriel A.': 120,},
'52': {'Tomás M.': 143,'Diego G.': 130,'Nicolás P.': 130,'Gabriel A.': 120,},
'53': {'Tomás M.': 151,'Diego G.': 133,'Nicolás P.': 131,'Gabriel A.': 121,},
'54': {'Tomás M.': 154,'Diego G.': 137,'Nicolás P.': 134,'Gabriel A.': 124,},
'55': {'Tomás M.': 155,'Diego G.': 137,'Nicolás P.': 134,'Gabriel A.': 124,},
'56': {'Tomás M.': 159,'Diego G.': 141,'Nicolás P.': 138,'Gabriel A.': 128,},
'57': {'Tomás M.': 160,'Diego G.': 141,'Nicolás P.': 139,'Gabriel A.': 128,},
'58': {'Tomás M.': 160,'Diego G.': 142,'Nicolás P.': 140,'Gabriel A.': 129,},
'59': {'Tomás M.': 161,'Diego G.': 143,'Nicolás P.': 141,'Gabriel A.': 129,},
'60': {'Tomás M.': 162,'Nicolás P.': 149,'Diego G.': 144,'Gabriel A.': 130,},
'61': {'Tomás M.': 166,'Nicolás P.': 152,'Diego G.': 144,'Gabriel A.': 134,},
'62': {'Tomás M.': 170,'Nicolás P.': 156,'Diego G.': 144,'Gabriel A.': 134,},
'63': {'Tomás M.': 178,'Nicolás P.': 164,'Diego G.': 152,'Gabriel A.': 135,},
'64': {'Tomás M.': 178,'Nicolás P.': 164,'Diego G.': 155,'Gabriel A.': 135,}


    };
    
    
    // Create root element
    // https://www.amcharts.com/docs/v5/getting-started/#Root_element
    var root = am5.Root.new("chartdivTaurinos");
    
    root.numberFormatter.setAll({
      numberFormat: "#a",
    
      // Group only into M (millions), and B (billions)
      bigNumberPrefixes: [
        { number: 1e6, suffix: "M" },
        { number: 1e9, suffix: "B" }
      ],
    
      // Do not use small number prefixes at all
      smallNumberPrefixes: []
    });
    
    var stepDuration = 2000;
    
    
    // Set themes
    // https://www.amcharts.com/docs/v5/concepts/themes/
    root.setThemes([am5themes_Animated.new(root)]);
    
    
    // Create chart
    // https://www.amcharts.com/docs/v5/charts/xy-chart/
    var chart = root.container.children.push(am5xy.XYChart.new(root, {
      panX: true,
      panY: true,
      wheelX: "none",
      wheelY: "none"
    }));
    
    
    // We don't want zoom-out button to appear while animating, so we hide it at all
    chart.zoomOutButton.set("forceHidden", true);
    
    
    // Create axes
    // https://www.amcharts.com/docs/v5/charts/xy-chart/axes/
    var yRenderer = am5xy.AxisRendererY.new(root, {
      minGridDistance: 20,
      inversed: true
    });
    // hide grid
    yRenderer.grid.template.set("visible", false);
    
    var yAxis = chart.yAxes.push(am5xy.CategoryAxis.new(root, {
      maxDeviation: 0,
      categoryField: "network",
      renderer: yRenderer
    }));
    
    var xAxis = chart.xAxes.push(am5xy.ValueAxis.new(root, {
      maxDeviation: 0,
      min: 0,
      strictMinMax: true,
      extraMax: 0.1,
      renderer: am5xy.AxisRendererX.new(root, {})
    }));
    
    xAxis.set("interpolationDuration", stepDuration / 10);
    xAxis.set("interpolationEasing", am5.ease.linear);
    
    
    // Add series
    // https://www.amcharts.com/docs/v5/charts/xy-chart/series/
    var series = chart.series.push(am5xy.ColumnSeries.new(root, {
      xAxis: xAxis,
      yAxis: yAxis,
      valueXField: "value",
      categoryYField: "network"
    }));
    
    // Rounded corners for columns
    series.columns.template.setAll({ cornerRadiusBR: 5, cornerRadiusTR: 5 });
    
    // Make each column to be of a different color
    series.columns.template.adapters.add("fill", function (fill, target) {
      return chart.get("colors").getIndex(series.columns.indexOf(target));
    });
    
    series.columns.template.adapters.add("stroke", function (stroke, target) {
      return chart.get("colors").getIndex(series.columns.indexOf(target));
    });
    
    // Add label bullet
    series.bullets.push(function () {
      return am5.Bullet.new(root, {
        locationX: 1,
        sprite: am5.Label.new(root, {
          text: "{valueXWorking.formatNumber('#.# a')}",
          fill: root.interfaceColors.get("alternativeText"),
          centerX: am5.p100,
          centerY: am5.p50,
          populateText: true
        })
      });
    });
    
    var label = chart.plotContainer.children.push(am5.Label.new(root, {
      text: "1",
      fontSize: "8em",
      opacity: 0.2,
      x: am5.p100,
      y: am5.p100,
      centerY: am5.p100,
      centerX: am5.p100
    }));
    
    // Get series item by category
    function getSeriesItem(category) {
      for (var i = 0; i < series.dataItems.length; i++) {
        var dataItem = series.dataItems[i];
        if (dataItem.get("categoryY") == category) {
          return dataItem;
        }
      }
    }
    
    // Axis sorting
    function sortCategoryAxis() {
      // sort by value
      series.dataItems.sort(function (x, y) {
        return y.get("valueX") - x.get("valueX"); // descending
        //return x.get("valueX") - y.get("valueX"); // ascending
      });
    
      // go through each axis item
      am5.array.each(yAxis.dataItems, function (dataItem) {
        // get corresponding series item
        var seriesDataItem = getSeriesItem(dataItem.get("category"));
    
        if (seriesDataItem) {
          // get index of series data item
          var index = series.dataItems.indexOf(seriesDataItem);
          // calculate delta position
          var deltaPosition =
            (index - dataItem.get("index", 0)) / series.dataItems.length;
          // set index to be the same as series data item index
          if (dataItem.get("index") != index) {
            dataItem.set("index", index);
            // set deltaPosition instanlty
            dataItem.set("deltaPosition", -deltaPosition);
            // animate delta position to 0
            dataItem.animate({
              key: "deltaPosition",
              to: 0,
              duration: stepDuration / 2,
              easing: am5.ease.out(am5.ease.cubic)
            });
          }
        }
      });
      // sort axis items by index.
      // This changes the order instantly, but as deltaPosition is set, they keep in the same places and then animate to true positions.
      yAxis.dataItems.sort(function (x, y) {
        return x.get("index") - y.get("index");
      });
    }
    
    var year = 1;
    
    // update data with values each 1.5 sec
    var interval = setInterval(function () {
      year++;
    
      if (year > 64) {
        clearInterval(interval);
        clearInterval(sortInterval);
      }
    
      updateData();
    }, stepDuration);
    
    var sortInterval = setInterval(function () {
      sortCategoryAxis();
    }, 100);
    
    function setInitialData() {
      var d = allData[year];
    
      for (var n in d) {
        series.data.push({ network: n, value: d[n] });
        yAxis.data.push({ network: n });
      }
    }
    
    function updateData() {
      var itemsWithNonZero = 0;
    
      if (allData[year]) {
        label.set("text", year.toString());
    
        am5.array.each(series.dataItems, function (dataItem) {
          var category = dataItem.get("categoryY");
          var value = allData[year][category];
    
          if (value > 0) {
            itemsWithNonZero++;
          }
    
          dataItem.animate({
            key: "valueX",
            to: value,
            duration: stepDuration,
            easing: am5.ease.linear
          });
          dataItem.animate({
            key: "valueXWorking",
            to: value,
            duration: stepDuration,
            easing: am5.ease.linear
          });
        });
    
        yAxis.zoom(0, itemsWithNonZero / yAxis.dataItems.length);
      }
    }
    
    setInitialData();
    setTimeout(function () {
      year++;
      updateData();
    }, 50);
    
    // Make stuff animate on load
    // https://www.amcharts.com/docs/v5/concepts/animations/
    series.appear(1000);
    chart.appear(1000, 100);
    
    }); // end am5.ready()
    </script>
    
    <!-- HTML -->
    <div id="chartdivTaurinos"></div>